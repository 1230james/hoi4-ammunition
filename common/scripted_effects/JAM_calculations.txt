# Ugly code warning :(

# Constants
# All ammo-related quantities are in thousands per day
@JAM_fallback_ammo = 0.02

# Army ammo usage
@JAM_army_LTK_ammo = 0.03 # Light tank
@JAM_army_MTK_ammo = 0.04 # Medium tank
@JAM_army_HTK_ammo = 0.05 # Heavy tank
@JAM_army_STK_ammo = 0.06 # Super-heavy tank
@JAM_army_OTK_ammo = 0.05 # Modern armor

@JAM_army_LAR_ammo = 0.05 # Light SPG
@JAM_army_MAR_ammo = 0.06 # Medium SPG
@JAM_army_HAR_ammo = 0.07 # Heavy SPG
@JAM_army_SAR_ammo = 0.08 # Super-heavy SPG
@JAM_army_OAR_ammo = 0.07 # Modern SPG

@JAM_army_LAA_ammo = 0.03 # Light SPAA
@JAM_army_MAA_ammo = 0.04 # Medium SPAA
@JAM_army_HAA_ammo = 0.05 # Heavy SPAA
@JAM_army_SAA_ammo = 0.06 # Super-heavy SPAA
@JAM_army_OAA_ammo = 0.05 # Modern SPAA

@JAM_army_LTD_ammo = 0.03 # Light TD
@JAM_army_MTD_ammo = 0.04 # Medium TD
@JAM_army_HTD_ammo = 0.05 # Heavy TD
@JAM_army_STD_ammo = 0.06 # Super-heavy TD
@JAM_army_OTD_ammo = 0.05 # Modern TD

@JAM_army_ATK_ammo = 0.03 # Amphibious tank
@JAM_army_LAM_ammo = 0.03 # Light amphibious
@JAM_army_MAM_ammo = 0.04 # Medium amphibious
@JAM_army_HAM_ammo = 0.05 # Heavy amphibious

@JAM_army_LFT_ammo = 0.05 # Light flame tank
@JAM_army_MFT_ammo = 0.04 # Medium flame tank
@JAM_army_HFT_ammo = 0.03 # Heavy flame tank

@JAM_army_INF_ammo = 0.01 # Infantry
@JAM_army_BIC_ammo = 0.01 # Bike battalion
@JAM_army_MRN_ammo = 0.01 # Marines
@JAM_army_MRC_ammo = 0.01 # Marine commandos
@JAM_army_MTN_ammo = 0.01 # Mountaineers
@JAM_army_PAR_ammo = 0.01 # Paratroopers
@JAM_army_PEN_ammo = 0.01 # Penal battalion (USSR?)
@JAM_army_IRR_ammo = 0.01 # Irregulars (Ethiopia?)
@JAM_army_MIL_ammo = 0.01 # Militia
@JAM_army_BAB_ammo = 0.01 # Assault battalion (Italy)

@JAM_army_MOT_ammo = 0.01 # Motorized infantry
@JAM_army_MEC_ammo = 0.02 # Mechanized infantry
@JAM_army_AMT_ammo = 0.02 # Amtracs

@JAM_army_CAV_ammo = 0.01 # Cavalry
@JAM_army_CAM_ammo = 0.01 # Camelry
@JAM_army_CAR_ammo = 0.02 # Armored car

@JAM_army_AA_ammo  = 0.03 # Support anti-air
@JAM_army_ANA_ammo = 0.03 # Line anti-air
@JAM_army_MAA_ammo = 0.03 # Motorized anti-air

@JAM_army_ART_ammo = 0.04 # Support artillery
@JAM_army_ART_ammo = 0.05 # Line artillery
@JAM_army_MRT_ammo = 0.05 # Motorized artillery

@JAM_army_RART_ammo = 0.07 # Support rocket arty
@JAM_army_RRT_ammo  = 0.07 # Line rocket arty
@JAM_army_TRA_ammo  = 0.07 # Motorized rocket arty (truck-drawn)
@JAM_army_MRA_ammo  = 0.07 # Truck-mounted rocket arty (katyushas)

@JAM_army_AT_ammo  = 0.03 # Support anti-tank
@JAM_army_ANT_ammo = 0.04 # Line Anti-tank
@JAM_army_MAT_ammo = 0.04 # Motorized anti-tank

@JAM_army_CREC_ammo = 0.01 # Cav recon
@JAM_army_MREC_ammo = 0.02 # Motorized recon
@JAM_army_AREC_ammo = 0.02 # Armored car recon
@JAM_army_TREC_ammo = 0.03 # Light tank recon

@JAM_army_MP_ammo  = 0.01 # Military Police
@JAM_army_LTA_ammo = 0.03 # Airborne light tanks
@JAM_army_RAN_ammo = 0.01 # Rangers
@JAM_army_WIN_ammo = 0.01 # Winter logi (Finland?)
@JAM_army_LRP_ammo = 0.01 # Long-range patrol (Finland)

@JAM_army_RWG_ammo = 0.1 # Railway gun

@JAM_army_LOG_ammo = 0 # Logistics # logiman logiman pls deliver more mammons logiman
@JAM_army_ENG_ammo = 0 # Engineers
@JAM_army_PIO_ammo = 0 # Pioneers
@JAM_army_BUS_ammo = 0 # Per Albin bus
@JAM_army_HOS_ammo = 0 # Field hospital
@JAM_army_SIG_ammo = 0 # Signal company

# Navy ammo usage
@JAM_navy_CV_ammo = 0.05 # Carrier
@JAM_navy_BB_ammo = 0.1  # Battleship
@JAM_navy_BC_ammo = 0.1  # Battlecruiser
@JAM_navy_CA_ammo = 0.08 # Heavy cruiser
@JAM_navy_CL_ammo = 0.07 # Light cruiser
@JAM_navy_DD_ammo = 0.05 # Destroyer
@JAM_navy_SS_ammo = 0.04 # Submarine

# Air ammo usage
@JAM_air_FTR_ammo = 0.04 # Fighter
@JAM_air_CVF_ammo = 0.04 # CV Fighter
@JAM_air_CAS_ammo = 0.04 # CAS
@JAM_air_CVC_ammo = 0.04 # CV CAS
@JAM_air_NAV_ammo = 0.05 # Naval bomber
@JAM_air_CVN_ammo = 0.05 # CV Naval bomber
@JAM_air_KMK_ammo = 0.04 # Suicide craft (Kamikaze)
@JAM_air_CKM_ammo = 0.04 # CV suicide craft

@JAM_air_TAB_ammo = 0.05 # Tac bomber
@JAM_air_HFT_ammo = 0.05 # Heavy fighter
@JAM_air_SCP_ammo = 0.04 # Scout plane

@JAM_air_STB_ammo = 0.08 # Strat bomber
@JAM_air_MPP_ammo = 0.04 # Maritime patrol plane

@JAM_air_JFT_ammo = 0.04 # Jet fighter
@JAM_air_JTB_ammo = 0.05 # Jet tac bomber
@JAM_air_JSB_ammo = 0.08 # Jet strat bomber

@JAM_air_RIT_ammo = 0 # Rocket interceptor
@JAM_air_TRP_ammo = 0 # Transport
@JAM_air_GDM_ammo = 0 # Guided missile

# Determine total current ammo demand of the army
# Outputs the following values to the listed variables:
#   JAM_army_ammo_demand: Total qty. of ammo demanded, in thousands
JAM_se_calculate_army_ammo_demand = {
    # Set/reset variables
    set_variable = {
        var   = JAM_army_ammo_demand
        value = 0
    }
    
    # Declaring some working variables
    set_temp_variable = {
        var   = total_units
        value = num_battalions
    }
    set_temp_variable = {
        var   = total_demand
        value = 0
    }
    set_temp_variable = {
        var   = temp_units
        value = 0
    }
    set_temp_variable = {
        var   = temp_demand
        value = 0
    }
    
    # Calculate total possible demand
    set_temp_variable = { temp_units  = num_battalions_with_type@light_armor }
    set_temp_variable = { temp_demand = @JAM_army_LTK_ammo    }
    multiply_temp_variable = { temp_demand      = temp_units  }
    add_to_temp_variable   = { total_demand     = temp_demand }
    subtract_from_temp_variable = { total_units = temp_units  }
    
    set_temp_variable = { temp_units  = num_battalions_with_type@medium_armor }
    set_temp_variable = { temp_demand = @JAM_army_MTK_ammo    }
    multiply_temp_variable = { temp_demand      = temp_units  }
    add_to_temp_variable   = { total_demand     = temp_demand }
    subtract_from_temp_variable = { total_units = temp_units  }
    
    set_temp_variable = { temp_units  = num_battalions_with_type@heavy_armor }
    set_temp_variable = { temp_demand = @JAM_army_HTK_ammo    }
    multiply_temp_variable = { temp_demand      = temp_units  }
    add_to_temp_variable   = { total_demand     = temp_demand }
    subtract_from_temp_variable = { total_units = temp_units  }
    
    set_temp_variable = { temp_units  = num_battalions_with_type@super_heavy_armor }
    set_temp_variable = { temp_demand = @JAM_army_STK_ammo    }
    multiply_temp_variable = { temp_demand      = temp_units  }
    add_to_temp_variable   = { total_demand     = temp_demand }
    subtract_from_temp_variable = { total_units = temp_units  }
    
    set_temp_variable = { temp_units  = num_battalions_with_type@modern_armor }
    set_temp_variable = { temp_demand = @JAM_army_OTK_ammo    }
    multiply_temp_variable = { temp_demand      = temp_units  }
    add_to_temp_variable   = { total_demand     = temp_demand }
    subtract_from_temp_variable = { total_units = temp_units  }
    
    # Final output
    set_variable = {
        var   = JAM_army_ammo_demand
        value = total_demand
    }
}

# Debug
JAM_se_debug = {
    set_variable = {
        var   = JAM_debug_var
        value = 0
    }
    set_temp_variable = {
        var   = total_units
        value = num_battalions
    }
    set_variable = {
        var   = JAM_debug_var
        value = total_units
    }
}
